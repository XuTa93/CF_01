<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:CF_01.ViewModels"
             xmlns:ursa="https://irihi.tech/ursa"
             mc:Ignorable="d"
             d:DesignWidth="200"
             d:DesignHeight="650"
             x:Class="CF_01.Views.Thermometer"
             x:DataType="vm:ThermometerViewModel">

  <!-- Viewbox helps scale automatically -->
  <Viewbox Stretch="Uniform">
    <!-- THERMOMETER - standalone -->
    <Border Width="250" Height="650"
            Background="#222222"
            BorderBrush="#555555"
            BorderThickness="3"
            CornerRadius="15"
            Padding="15">

      <Grid>
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"/>
          <ColumnDefinition Width="Auto"/>
        </Grid.ColumnDefinitions>

        <!-- Canvas with thermometer -->
        <Canvas Grid.Column="0" Width="100" Height="620"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">

          <!-- Temperature scales -->
          <ItemsControl ItemsSource="{Binding TemperatureScales}">
            <ItemsControl.ItemsPanel>
              <ItemsPanelTemplate>
                <Canvas/>
              </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>

            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Canvas Canvas.Top="{Binding YPosition}">
                  <TextBlock Text="{Binding Label}"
                             Foreground="{Binding Color}"
                             FontSize="{Binding FontSize}"
                             FontWeight="{Binding FontWeight}"
                             Canvas.Left="105"
                             Canvas.Top="-8"/>
                </Canvas>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>

          <!-- Mercury column -->
          <Border Canvas.Left="15"
                  Canvas.Bottom="15"
                  Width="70"
                  Height="{Binding MercuryHeight}"
                  Background="{Binding MercuryBrush}"
                  CornerRadius="35">
            <Border.Effect>
              <DropShadowEffect BlurRadius="25" Opacity="0.9" OffsetX="0" OffsetY="0"/>
            </Border.Effect>

            <TextBlock Text="{Binding Temperature, StringFormat='{}{0:F1}°C'}"
                       FontSize="16"
                       FontWeight="Bold"
                       Foreground="White"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Bottom"
                       Margin="0,0,0,10">
              <TextBlock.Effect>
                <DropShadowEffect Color="Black" BlurRadius="5" Opacity="0.9"/>
              </TextBlock.Effect>
            </TextBlock>
          </Border>
        </Canvas>

        <!-- Ursa RangeSlider (two-thumb) -->
        <StackPanel Grid.Column="1"
                    Orientation="Vertical"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Margin="20,0,0,0">

          <ursa:RangeSlider Height="590"
                            Orientation="Vertical"
                            Minimum="0"
                            Maximum="120"
                            LowerValue="{Binding , Mode=TwoWay}"
                            UpperValue="{Binding Temperature, Mode=TwoWay}"
                            TickFrequency="10"
                            
                            Foreground="{Binding MercuryBrush}"
                            Background="#333333"
                            HorizontalAlignment="Center"/>

          <TextBlock Text="Điều chỉnh"
                     Foreground="#AAAAAA"
                     FontSize="10"
                     HorizontalAlignment="Center"
                     Margin="0,10,0,0"/>
        </StackPanel>

      </Grid>
    </Border>
  </Viewbox>
</UserControl>
